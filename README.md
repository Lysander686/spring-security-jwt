## 刷新 Token 的 Redis 方案

对 Token 进行刷新续期，我们要解决**并发请求导致重复刷新 Token** 的问题，这也是设计刷新 Token 的难点。

**后端解决思路**：

当遇到并发请求时，第一个接口刷新了 Token，后面的请求仍然能通过请求，且不造成 Token 重复刷新。那么，后端在用户第一次登录时，需要生成两个 Token，AccessToken 和 RefreshToken。其中，RefreshToken 的有效期限要比 AccessToken 长一点（比如 15s，我将这个时间称为过渡时间）。

应该再添加一个刷新 Token 的过渡期，在刷新 Token 的时候，在 Redis 同时设置一条过渡期数据，视情况设置 15S 过期(这个时间看情况设置)，然后认证的时候先判断这个 Token 是不是还在过渡期内，是的话就直接放行通过。

大概的意思的刷新Token后，应该再添加一个刷新 Token 的过渡期，在 Redis 同时设置一条过渡期数据，设置 15S 过期(这个时间看情况设置)，然后首先判断下Redis中是否存在这个Token，存在就放行，这样同一时间的请求就都可以通过了。